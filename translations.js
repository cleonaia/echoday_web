// Sistema de traducción para Echoday
const translations = {
  es: {
    // Navegación
    nav_services: "Servicios",
    nav_automation: "Automatización IA",
    nav_web_dev: "Desarrollo Web",
    nav_presentations: "Presentaciones de Impacto",
    nav_mobile_apps: "Creación de Apps Móviles",
    nav_about: "About",
    nav_contact: "Contacto",

    // Hero Section
    hero_title: "El futuro es hoy, Echoday",
    hero_subtitle: "Transformación digital y creatividad para empresas que quieren destacar.",
    hero_cta: "¡Hablemos de tu próximo proyecto!",

    // Servicios
    services_title: "¿Qué hacemos en Echoday?",
    services_description: "Creamos experiencias digitales que inspiran, transforman y hacen crecer tu empresa. Evoluciona, destaca y lidera.",
    
    click_hint: "¡Haz clic!",

    // Servicio 1 - Automatización IA
    service1_title: "Automatización IA",
    service1_description: "Automatiza procesos con inteligencia artificial, bots avanzados y sistemas inteligentes para transformar tu empresa.",
    service1_feature1: "Chatbots inteligentes con IA",
    service1_feature2: "Integración WhatsApp Business",
    service1_feature3: "Automatización de tareas repetitivas",
    service1_feature4: "Análisis de datos en tiempo real",
    service1_feature5: "Workflows personalizados",

    // Servicio 2 - Desarrollo Web
    service2_title: "Desarrollo Web",
    service2_description: "Webs, apps, chatbots y dashboards con tecnología de punta y diseño atractivo, listos para crecer contigo.",
    service2_feature1: "Diseño responsive y moderno",
    service2_feature2: "Optimización SEO avanzada",
    service2_feature3: "Integración con APIs",
    service2_feature4: "Panel de administración",
    service2_feature5: "Velocidad de carga optimizada",

    // Servicio 3 - Apps Móviles
    service3_title: "Apps Móviles",
    service3_description: "Desarrollo de apps móviles para iOS y Android, personalizadas para tu negocio y clientes.",
    service3_feature1: "Desarrollo iOS y Android",
    service3_feature2: "Interfaz intuitiva y atractiva",
    service3_feature3: "Notificaciones push",
    service3_feature4: "Sincronización en tiempo real",
    service3_feature5: "Publicación en tiendas",

    // Servicio 4 - Consultoría
    service4_title: "Consultoría para Empresarios",
    service4_description: "Diagnóstico, ideas, implementación y capacitación: conviértete en referente digital en tu sector.",
    service4_feature1: "Diagnóstico digital completo",
    service4_feature2: "Estrategia de transformación",
    service4_feature3: "Implementación personalizada",
    service4_feature4: "Capacitación del equipo",
    service4_feature5: "Soporte continuo",

    // Servicio 5 - Presentaciones
    service5_title: "Presentaciones de Impacto",
    service5_description: "Convierte tu pitch, demo o evento en una experiencia memorable. Sorprende a tu audiencia desde el primer minuto.",
    service5_feature1: "Diseño visual impactante",
    service5_feature2: "Animaciones y transiciones",
    service5_feature3: "Contenido persuasivo",
    service5_feature4: "Interactividad avanzada",
    service5_feature5: "Adaptado a tu audiencia",

    // Simulador
    simulator_title: "Simulador de WhatsApp",
    simulator_description: "Esta demo te permite interactuar como si fueras un cliente en WhatsApp, viendo paso a paso cómo funciona la automatización de atención y solicitud de préstamos.",
    simulator_instruction1: "Haz clic en las opciones para avanzar.",
    simulator_instruction2: "¡No es real, es solo una demo!",
    simulator_start: "Iniciar simulación",
    simulator_option1: "1️⃣ Consultar estado de mi solicitud",
    simulator_option2: "2️⃣ Solicitar nuevo préstamo",
    simulator_option3: "3️⃣ Hablar con un agente",
    simulator_send_data: "Enviar mis datos de préstamo",
    simulator_accept: "SÍ, acepto condiciones",
    simulator_reject: "NO, tengo dudas",
    simulator_reset: "Reiniciar simulador",

    // Proyectos
    projects_title: "Proyectos Destacados",
    projects_description: "Algunos de nuestros trabajos más recientes que demuestran nuestra capacidad de innovación y calidad.",

    // Contacto
    contact_title: "¡Conversemos!",
    contact_subtitle: "¿Listo para transformar tu empresa? ¡Hagamos juntos algo grande!",
    contact_name_label: "Nombre",
    contact_name_placeholder: "¿Cómo te llamas?",
    contact_company_label: "Empresa",
    contact_company_placeholder: "¿Dónde trabajas? (opcional)",
    contact_email_label: "Email",
    contact_email_placeholder: "Tu correo de contacto",
    contact_message_label: "Mensaje",
    contact_message_placeholder: "¿En qué puedo ayudarte?",
    contact_send_button: "Enviar mensaje",
    contact_whatsapp: "Escríbeme ahora",
    contact_social: "Redes:",

    // Footer
    footer_tagline: "Innovación + Tecnología + Creatividad",
    footer_made_with: "Hecho con",
    footer_by: "por",

    // Modales
    modal_thanks_title: "¡Gracias por tu mensaje!",
    modal_thanks_message: "Tomaste una gran decisión.<br>Nos pondremos en contacto contigo lo más rápido posible.",
    modal_close: "Cerrar",
    modal_about_title: "Sobre Echoday",

    // About Text
    about_text: "¡Hola! Soy un estudiante de Ingeniería de Datos con una profunda pasión por la innovación y el desarrollo tecnológico. Mi objetivo es aportar soluciones creativas y eficientes que impulsen la transformación digital, especialmente en Sudamérica, una región llena de potencial y oportunidades para abrir nuevos horizontes de conocimiento.\n\nMe motiva crear herramientas y plataformas que faciliten la vida de las personas y las empresas, utilizando datos, inteligencia artificial y automatización para resolver desafíos reales. Creo firmemente que la tecnología es un motor de cambio positivo, y por eso busco estar siempre a la vanguardia, aprendiendo y aplicando las mejores prácticas del sector.\n\nMi visión es contribuir al desarrollo de una región más competitiva, conectada y preparada para el futuro, colaborando con equipos multidisciplinarios y compartiendo el conocimiento adquirido. Si compartes esta pasión por innovar y transformar, ¡conversemos y creemos juntos el próximo gran proyecto!"
  },

  en: {
    // Navigation
    nav_services: "Services",
    nav_automation: "AI Automation",
    nav_web_dev: "Web Development",
    nav_presentations: "Impact Presentations",
    nav_mobile_apps: "Mobile App Creation",
    nav_about: "About",
    nav_contact: "Contact",

    // Hero Section
    hero_title: "The future is today, Echoday",
    hero_subtitle: "Digital transformation and creativity for companies that want to stand out.",
    hero_cta: "Let's talk about your next project!",

    // Services
    services_title: "What do we do at Echoday?",
    services_description: "We create digital experiences that inspire, transform and grow your business. Evolve, stand out and lead.",
    
    click_hint: "Click me!",

    // Service 1 - AI Automation
    service1_title: "AI Automation",
    service1_description: "Automate processes with artificial intelligence, advanced bots and intelligent systems to transform your company.",
    service1_feature1: "Intelligent AI chatbots",
    service1_feature2: "WhatsApp Business integration",
    service1_feature3: "Repetitive task automation",
    service1_feature4: "Real-time data analysis",
    service1_feature5: "Custom workflows",

    // Service 2 - Web Development
    service2_title: "Web Development",
    service2_description: "Websites, apps, chatbots and dashboards with cutting-edge technology and attractive design, ready to grow with you.",
    service2_feature1: "Responsive and modern design",
    service2_feature2: "Advanced SEO optimization",
    service2_feature3: "API integration",
    service2_feature4: "Admin panel",
    service2_feature5: "Optimized loading speed",

    // Service 3 - Mobile Apps
    service3_title: "Mobile Apps",
    service3_description: "Development of mobile apps for iOS and Android, customized for your business and customers.",
    service3_feature1: "iOS and Android development",
    service3_feature2: "Intuitive and attractive interface",
    service3_feature3: "Push notifications",
    service3_feature4: "Real-time synchronization",
    service3_feature5: "Store publication",

    // Service 4 - Consulting
    service4_title: "Business Consulting",
    service4_description: "Diagnosis, ideas, implementation and training: become a digital leader in your sector.",
    service4_feature1: "Complete digital diagnosis",
    service4_feature2: "Transformation strategy",
    service4_feature3: "Personalized implementation",
    service4_feature4: "Team training",
    service4_feature5: "Continuous support",

    // Service 5 - Presentations
    service5_title: "Impact Presentations",
    service5_description: "Turn your pitch, demo or event into a memorable experience. Surprise your audience from the first minute.",
    service5_feature1: "Stunning visual design",
    service5_feature2: "Animations and transitions",
    service5_feature3: "Persuasive content",
    service5_feature4: "Advanced interactivity",
    service5_feature5: "Adapted to your audience",

    // Simulator
    simulator_title: "WhatsApp Simulator",
    simulator_description: "This demo allows you to interact as if you were a customer on WhatsApp, seeing step by step how customer service and loan application automation works.",
    simulator_instruction1: "Click on the options to proceed.",
    simulator_instruction2: "It's not real, it's just a demo!",
    simulator_start: "Start simulation",
    simulator_option1: "1️⃣ Check status of my application",
    simulator_option2: "2️⃣ Request new loan",
    simulator_option3: "3️⃣ Talk to an agent",
    simulator_send_data: "Send my loan data",
    simulator_accept: "YES, I accept conditions",
    simulator_reject: "NO, I have doubts",
    simulator_reset: "Reset simulator",

    // Projects
    projects_title: "Featured Projects",
    projects_description: "Some of our most recent work that demonstrates our capacity for innovation and quality.",

    // Contact
    contact_title: "Let's talk!",
    contact_subtitle: "Ready to transform your business? Let's do something great together!",
    contact_name_label: "Name",
    contact_name_placeholder: "What's your name?",
    contact_company_label: "Company",
    contact_company_placeholder: "Where do you work? (optional)",
    contact_email_label: "Email",
    contact_email_placeholder: "Your contact email",
    contact_message_label: "Message",
    contact_message_placeholder: "How can I help you?",
    contact_send_button: "Send message",
    contact_whatsapp: "Write me now",
    contact_social: "Social:",

    // Footer
    footer_tagline: "Innovation + Technology + Creativity",
    footer_made_with: "Made with",
    footer_by: "by",

    // Modals
    modal_thanks_title: "Thanks for your message!",
    modal_thanks_message: "You made a great decision.<br>We will contact you as soon as possible.",
    modal_close: "Close",
    modal_about_title: "About Echoday",

    // About Text
    about_text: "Hello! I'm a Data Engineering student with a deep passion for innovation and technological development. My goal is to provide creative and efficient solutions that drive digital transformation, especially in South America, a region full of potential and opportunities to open new horizons of knowledge.\n\nI'm motivated to create tools and platforms that make life easier for people and businesses, using data, artificial intelligence and automation to solve real challenges. I firmly believe that technology is an engine of positive change, and that's why I always seek to be at the forefront, learning and applying the best practices in the sector.\n\nMy vision is to contribute to the development of a more competitive, connected and future-ready region, collaborating with multidisciplinary teams and sharing acquired knowledge. If you share this passion for innovation and transformation, let's talk and create the next big project together!"
  },

  pt: {
    // Navegação
    nav_services: "Serviços",
    nav_automation: "Automação IA",
    nav_web_dev: "Desenvolvimento Web",
    nav_presentations: "Apresentações de Impacto",
    nav_mobile_apps: "Criação de Apps Móveis",
    nav_about: "Sobre",
    nav_contact: "Contato",

    // Seção Hero
    hero_title: "O futuro é hoje, Echoday",
    hero_subtitle: "Transformação digital e criatividade para empresas que querem se destacar.",
    hero_cta: "Vamos falar sobre seu próximo projeto!",

    // Serviços
    services_title: "O que fazemos na Echoday?",
    services_description: "Criamos experiências digitais que inspiram, transformam e fazem crescer sua empresa. Evolua, destaque-se e lidere.",
    
    click_hint: "Clique aqui!",

    // Serviço 1 - Automação IA
    service1_title: "Automação IA",
    service1_description: "Automatize processos com inteligência artificial, bots avançados e sistemas inteligentes para transformar sua empresa.",
    service1_feature1: "Chatbots inteligentes com IA",
    service1_feature2: "Integração WhatsApp Business",
    service1_feature3: "Automação de tarefas repetitivas",
    service1_feature4: "Análise de dados em tempo real",
    service1_feature5: "Workflows personalizados",

    // Serviço 2 - Desenvolvimento Web
    service2_title: "Desenvolvimento Web",
    service2_description: "Sites, apps, chatbots e dashboards com tecnologia de ponta e design atrativo, prontos para crescer com você.",
    service2_feature1: "Design responsivo e moderno",
    service2_feature2: "Otimização SEO avançada",
    service2_feature3: "Integração com APIs",
    service2_feature4: "Painel de administração",
    service2_feature5: "Velocidade de carregamento otimizada",

    // Serviço 3 - Apps Móveis
    service3_title: "Apps Móveis",
    service3_description: "Desenvolvimento de apps móveis para iOS e Android, personalizados para seu negócio e clientes.",
    service3_feature1: "Desenvolvimento iOS e Android",
    service3_feature2: "Interface intuitiva e atrativa",
    service3_feature3: "Notificações push",
    service3_feature4: "Sincronização em tempo real",
    service3_feature5: "Publicação nas lojas",

    // Serviço 4 - Consultoria
    service4_title: "Consultoria para Empresários",
    service4_description: "Diagnóstico, ideias, implementação e capacitação: torne-se referência digital em seu setor.",
    service4_feature1: "Diagnóstico digital completo",
    service4_feature2: "Estratégia de transformação",
    service4_feature3: "Implementação personalizada",
    service4_feature4: "Capacitação da equipe",
    service4_feature5: "Suporte contínuo",

    // Serviço 5 - Apresentações
    service5_title: "Apresentações de Impacto",
    service5_description: "Transforme seu pitch, demo ou evento numa experiência memorável. Surpreenda sua audiência desde o primeiro minuto.",
    service5_feature1: "Design visual impactante",
    service5_feature2: "Animações e transições",
    service5_feature3: "Conteúdo persuasivo",
    service5_feature4: "Interatividade avançada",
    service5_feature5: "Adaptado à sua audiência",

    // Simulador
    simulator_title: "Simulador do WhatsApp",
    simulator_description: "Esta demo permite interagir como se fosse um cliente no WhatsApp, vendo passo a passo como funciona a automação de atendimento e solicitação de empréstimos.",
    simulator_instruction1: "Clique nas opções para avançar.",
    simulator_instruction2: "Não é real, é apenas uma demo!",
    simulator_start: "Iniciar simulação",
    simulator_option1: "1️⃣ Consultar status da minha solicitação",
    simulator_option2: "2️⃣ Solicitar novo empréstimo",
    simulator_option3: "3️⃣ Falar com um agente",
    simulator_send_data: "Enviar meus dados de empréstimo",
    simulator_accept: "SIM, aceito as condições",
    simulator_reject: "NÃO, tenho dúvidas",
    simulator_reset: "Reiniciar simulador",

    // Projetos
    projects_title: "Projetos Destacados",
    projects_description: "Alguns dos nossos trabalhos mais recentes que demonstram nossa capacidade de inovação e qualidade.",

    // Contato
    contact_title: "Vamos conversar!",
    contact_subtitle: "Pronto para transformar sua empresa? Vamos fazer algo grande juntos!",
    contact_name_label: "Nome",
    contact_name_placeholder: "Qual é seu nome?",
    contact_company_label: "Empresa",
    contact_company_placeholder: "Onde você trabalha? (opcional)",
    contact_email_label: "Email",
    contact_email_placeholder: "Seu email de contato",
    contact_message_label: "Mensagem",
    contact_message_placeholder: "Como posso te ajudar?",
    contact_send_button: "Enviar mensagem",
    contact_whatsapp: "Me escreva agora",
    contact_social: "Redes:",

    // Rodapé
    footer_tagline: "Inovação + Tecnologia + Criatividade",
    footer_made_with: "Feito com",
    footer_by: "por",

    // Modais
    modal_thanks_title: "Obrigado pela sua mensagem!",
    modal_thanks_message: "Você tomou uma ótima decisão.<br>Entraremos em contato o mais rápido possível.",
    modal_close: "Fechar",
    modal_about_title: "Sobre Echoday",

    // Texto About
    about_text: "Olá! Sou estudante de Engenharia de Dados com uma profunda paixão por inovação e desenvolvimento tecnológico. Meu objetivo é fornecer soluções criativas e eficientes que impulsionem a transformação digital, especialmente na América do Sul, uma região cheia de potencial e oportunidades para abrir novos horizontes de conhecimento.\n\nMe motivo a criar ferramentas e plataformas que facilitem a vida das pessoas e empresas, usando dados, inteligência artificial e automação para resolver desafios reais. Acredito firmemente que a tecnologia é um motor de mudança positiva, e por isso busco estar sempre na vanguarda, aprendendo e aplicando as melhores práticas do setor.\n\nMinha visão é contribuir para o desenvolvimento de uma região mais competitiva, conectada e preparada para o futuro, colaborando com equipes multidisciplinares e compartilhando conhecimento adquirido. Se você compartilha essa paixão por inovar e transformar, vamos conversar e criar juntos o próximo grande projeto!"
  }
};

// Sistema de gestión de idiomas
class LanguageManager {
  constructor() {
    this.currentLanguage = localStorage.getItem('echoday-language') || 'es';
    this.init();
  }

  init() {
    this.setupLanguageSelector();
    this.translatePage();
    this.updateLanguageDisplay();
  }

  setupLanguageSelector() {
    const languageToggle = document.getElementById('languageToggle');
    const languageMenu = document.getElementById('languageMenu');
    const languageOptions = document.querySelectorAll('.language-option');

    if (!languageToggle || !languageMenu) return;

    // Toggle del menú de idiomas
    languageToggle.addEventListener('click', (e) => {
      e.stopPropagation();
      const selector = document.querySelector('.language-selector');
      selector.classList.toggle('open');
      languageToggle.classList.toggle('open');
    });

    // Cerrar menú al hacer clic fuera
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.language-selector')) {
        const selector = document.querySelector('.language-selector');
        selector.classList.remove('open');
        languageToggle.classList.remove('open');
      }
    });

    // Opciones de idioma
    languageOptions.forEach(option => {
      option.addEventListener('click', (e) => {
        e.preventDefault();
        const lang = option.getAttribute('data-lang');
        this.changeLanguage(lang);
        
        // Cerrar el menú
        const selector = document.querySelector('.language-selector');
        selector.classList.remove('open');
        languageToggle.classList.remove('open');
      });
    });

    // Actualizar estados activos
    this.updateActiveLanguage();
  }

  changeLanguage(lang) {
    if (translations[lang]) {
      this.currentLanguage = lang;
      localStorage.setItem('echoday-language', lang);
      this.translatePage();
      this.updateLanguageDisplay();
      this.updateActiveLanguage();
      
      // Actualizar el HTML lang attribute
      document.documentElement.lang = lang;
    }
  }

  translatePage() {
    const elements = document.querySelectorAll('[data-translate]');
    const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
    
    elements.forEach(element => {
      const key = element.getAttribute('data-translate');
      const translation = translations[this.currentLanguage][key];
      if (translation) {
        element.innerHTML = translation;
      }
    });

    placeholderElements.forEach(element => {
      const key = element.getAttribute('data-translate-placeholder');
      const translation = translations[this.currentLanguage][key];
      if (translation) {
        element.placeholder = translation;
      }
    });

    // Actualizar el título de la página y meta tags
    const titleMeta = {
      'es': {
        title: 'Echoday - Soluciones Creativas',
        description: 'Transformación digital y creatividad para empresas que quieren destacar. Automatización IA, desarrollo web, apps móviles y más.',
        keywords: 'desarrollo web, automatización IA, apps móviles, transformación digital, consultoría empresarial'
      },
      'en': {
        title: 'Echoday - Creative Solutions',
        description: 'Digital transformation and creativity for companies that want to stand out. AI automation, web development, mobile apps and more.',
        keywords: 'web development, AI automation, mobile apps, digital transformation, business consulting'
      },
      'pt': {
        title: 'Echoday - Soluções Criativas',
        description: 'Transformação digital e criatividade para empresas que querem se destacar. Automação IA, desenvolvimento web, apps móveis e mais.',
        keywords: 'desenvolvimento web, automação IA, apps móveis, transformação digital, consultoria empresarial'
      }
    };

    const currentMeta = titleMeta[this.currentLanguage];
    if (currentMeta) {
      document.title = currentMeta.title;
      
      const descriptionMeta = document.querySelector('meta[name="description"]');
      if (descriptionMeta) {
        descriptionMeta.setAttribute('content', currentMeta.description);
      }
      
      const keywordsMeta = document.querySelector('meta[name="keywords"]');
      if (keywordsMeta) {
        keywordsMeta.setAttribute('content', currentMeta.keywords);
      }
    }

    // Actualizar el HTML lang attribute
    document.documentElement.lang = this.currentLanguage;

    // Actualizar about modal text si existe
    this.updateAboutModalText();
  }

  updateLanguageDisplay() {
    const currentLangElement = document.querySelector('.current-lang');
    if (currentLangElement) {
      const langDisplayNames = {
        'es': 'ES',
        'en': 'EN',
        'pt': 'PT'
      };
      currentLangElement.textContent = langDisplayNames[this.currentLanguage];
    }
  }

  updateActiveLanguage() {
    const languageOptions = document.querySelectorAll('.language-option');
    languageOptions.forEach(option => {
      option.classList.remove('active');
      if (option.getAttribute('data-lang') === this.currentLanguage) {
        option.classList.add('active');
      }
    });
  }

  updateAboutModalText() {
    // Actualizar función showAboutModal para manejar traducciones
    if (window.originalShowAboutModal) {
      window.originalShowAboutModal = window.showAboutModal;
    }
    
    // Override de la función showAboutModal original
    const aboutText = translations[this.currentLanguage].about_text;
    if (window.showAboutModal && aboutText) {
      // Almacenar el texto traducido para uso en showAboutModal
      window.translatedAboutText = aboutText;
    }
  }

  getCurrentLanguage() {
    return this.currentLanguage;
  }

  getTranslation(key) {
    return translations[this.currentLanguage][key] || key;
  }
}

// Inicializar el gestor de idiomas cuando el DOM esté listo
document.addEventListener('DOMContentLoaded', () => {
  window.languageManager = new LanguageManager();
});

// Función auxiliar para obtener traducciones desde cualquier parte del código
function t(key) {
  return window.languageManager ? window.languageManager.getTranslation(key) : key;
}
